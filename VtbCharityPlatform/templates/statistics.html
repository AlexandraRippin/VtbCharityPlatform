<!DOCTYPE html>
<html lang="ru">
<head>
    {% load static %}
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ | –ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –í–¢–ë</title>
    <link rel="stylesheet" href="{% static 'css/index_style.css' %}" />
    <link rel="stylesheet" href="{% static 'css/stats_style.css' %}" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header class="topbar">
        <a href="{% url 'index' %}" class="logo"><img src="{% static 'VTB_logo.svg' %}" alt="VTB"></a>
        <nav class="menu">
            <a href="{% url 'index' %}">–ü—Ä–æ–µ–∫—Ç—ã</a>
            <a href="{% url 'stats' %}" style="color: #0066ff;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
            <a href="https://www.vtb.ru" target="_blank">–û –±–∞–Ω–∫–µ</a>
        </nav>
    </header>

    <div class="stats-container">
        <div class="stats-header">
            <h1 class="stats-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–π</h1>
            <p class="stats-subtitle">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–æ–≤ –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º –∑–∞ —Ä–∞–∑–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã –≤—Ä–µ–º–µ–Ω–∏</p>
        </div>

        <div class="stats-overview">
            <div class="stat-card">
                <div class="stat-icon">üìä</div>
                <div class="stat-number">{{ total_donations }} ‚ÇΩ</div>
                <div class="stat-label">–û–±—â–∞—è —Å—É–º–º–∞ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–π</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üéØ</div>
                <div class="stat-number">{{ projects_count }}</div>
                <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üë•</div>
                <div class="stat-number">{{ total_donors }}</div>
                <div class="stat-label">–í—Å–µ–≥–æ –∂–µ—Ä—Ç–≤–æ–≤–∞—Ç–µ–ª–µ–π</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üìà</div>
                <div class="stat-number">{{ avg_donation }} ‚ÇΩ</div>
                <div class="stat-label">–°—Ä–µ–¥–Ω–µ–µ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ</div>
            </div>
        </div>

        <div class="charts-section">
            <h2 class="section-title">–î–∏–Ω–∞–º–∏–∫–∞ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–π</h2>

            <div class="charts-container">
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">–û–±—â–∏–µ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ –¥–Ω—è–º</h3>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="dailyChart"></canvas>
                    </div>
                </div>

                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">–ü–æ –ø—Ä–æ–µ–∫—Ç–∞–º</h3>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="projectsChart"></canvas>
                    </div>
                </div>

                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">–ü–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç—ã –ø–æ –¥–Ω—è–º</h3>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="projectsDailyChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div class="action-buttons">
            <a href="{% url 'index' %}" class="btn-primary">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–æ–µ–∫—Ç–∞–º</a>
        </div>
    </div>

    <script>
    const chartData = {
        daily: {
            labels: {{ daily_labels|safe }},
            data: {{ daily_data|safe }}
        },
        projects: {
            labels: {{ projects_labels|safe }},
            data: {{ projects_data|safe }}
        },
        projectsDaily: {{ projects_daily_data|safe }}
    };
    </script>
    <script src="{% static 'js/stats.js' %}"></script>
</body>
</html>